(function(a,b){if(typeof define==="function"&&define.amd){define([],b);}else{if(typeof module==="object"&&module.exports){module.exports=b();}else{a.Waterfall=b();
}}}(this,function(){var a=function(b){var c;Object.defineProperty(this,"minBoxWidth",{get:function(){return c;},set:function(i){if(i<100){i=100;}if(i>1000){i=1000;
}c=i;}});b=b||{};var f=b.containerSelector||".wf-container";var j=b.boxSelector||".wf-box";this.minBoxWidth=b.minBoxWidth||250;this.columns=[];this.container=document.querySelector(f);
this.boxes=this.container?Array.prototype.slice.call(this.container.querySelectorAll(j)):[];this.compose();var h=this.container.querySelectorAll("img"),g=this;
var k;for(var e=0;e<h.length;e++){var d=h[e];d.onload=function(){if(k){clearTimeout(k);}k=setTimeout(function(){g.compose(true);},500);};}window.addEventListener("resize",function(){g.compose();
});};a.prototype.computeNumberOfColumns=function(){var b=Math.floor(this.container.clientWidth/this.minBoxWidth);b=b||1;return b;};a.prototype.initColumns=function(b){if(b>0){this.columns=[];
var d=(100/b)+"%";while(b--){var c=document.createElement("div");c.className="wf-column";c.style.width=d;this.columns.push(c);this.container.appendChild(c);
}}};a.prototype.getMinHeightIndex=function(){if(this.columns&&this.columns.length>0){var d=this.columns[0].clientHeight,b=0;for(var c=1;c<this.columns.length;
c++){var e=this.columns[c];if(e.clientHeight<d){d=e.clientHeight;b=c;}}return b;}else{return -1;}};a.prototype.getHighestIndex=function(){if(this.columns&&this.columns.length>0){var b=this.columns[0].clientHeight,c=0;
for(var d=1;d<this.columns.length;d++){var e=this.columns[d];if(e.clientHeight>b){b=e.clientHeight;c=d;}}return c;}else{return -1;}};a.prototype.compose=function(g){var c=this.computeNumberOfColumns();
var h=this.columns.length;if(g||c!=h){for(var d=0;d<this.columns.length;d++){var e=this.columns[d];this.container.removeChild(e);}this.initColumns(c);for(var d=0,b=this.boxes.length;
d<b;d++){var f=this.boxes[d];this.addBox(f);}}};a.prototype.addBox=function(d){if(this.boxes.indexOf(d)<0){this.boxes.push(d);}var c=this.getMinHeightIndex();
if(c>-1){var b=this.columns[c];b.appendChild(d);}};return a;}));